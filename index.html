<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <title>Каталог на видеоигри</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        function loadCatalog(sortBy) {
            if (!window.XSLTProcessor) {
                document.getElementById("catalog").innerHTML =
                    "Този браузър не поддържа XSLTProcessor.";
                return;
            }

            var xhrXML = new XMLHttpRequest();
            xhrXML.open("GET", "videogames.xml", false);
            xhrXML.send(null);
            var xml = xhrXML.responseXML;

            var xhrXSL = new XMLHttpRequest();
            xhrXSL.open("GET", "videogames.xsl", false);
            xhrXSL.send(null);
            var xsl = xhrXSL.responseXML;

            var processor = new XSLTProcessor();
            processor.importStylesheet(xsl);
            if (sortBy) {
                processor.setParameter(null, "sortBy", sortBy);
            }

            var result = processor.transformToFragment(xml, document);
            var container = document.getElementById("catalog");
            while (container.firstChild) {
                container.removeChild(container.firstChild);
            }
            container.appendChild(result);
        }

        document.addEventListener("DOMContentLoaded", function () {
            loadCatalog('title');
            document.getElementById("sort_title").onclick = function () {
                loadCatalog('title');
            };
            document.getElementById("sort_genre").onclick = function () {
                loadCatalog('genre');
            };
            document.getElementById("sort_year").onclick = function () {
                loadCatalog('year');
            };
        });
    </script>
</head>
<body>
<div class="wrapper">
    <h1>Каталог на видеоигри за развлечение</h1>
    <div class="controls">
        <span>Сортирай по:</span>
        <button id="sort_title">Име</button>
        <button id="sort_genre">Жанр</button>
        <button id="sort_year">Година</button>
    </div>
    <div id="catalog"></div>
</div>
</body>
</html>

